{% extends 'base.html' %}

{% block content %}

    <div class="container">
        <div class="jumpotron text-center">
            <h1>Welcome {{ user.first_name}} {{user.last_name}}</h1>
        </div>
        {% if user.tasks %}
            <table class="table table-striped table-bordered table-hover">
                <thread>
                     <tr>
                        <th scope="col">Priority</th>
                         <th scope="col">Task</th>
                         <th scope="col">Edit</th>
                         <th scope="col">Remove</th>
                         <th scope="col">Status</th>
                    </tr>
                </thread>
                <tbody>
                {% for priority in priorities %}
                    {% for task in user.tasks %}
                            {% if task.priority.priority_id == priority.priority_id and task.status == False %}
                                 <tr class="{{task.getClassPriority()}}">
                                    <td scope="row">{{ task.priority.description }}</td>
                                     <td>{{ task.description }}</td>
                                     <td><a href="{{url_for('editTask', id = task.task_id)}}" class="btn btn-success">Edit</a></td>
                                     <td>
                                         <form action="/removeTask" method="post">
                                             <input type="hidden" name="id" value="{{task.task_id}}">
                                             <input type="submit" class ='btn btn-danger' value="Remove">
                                         </form>
                                     </td>
                                     <td>
                                         <form action="/changeStatus" method="post" id="form" name="form">
                                             <input type="hidden" name="id" value="{{task.task_id}}">
<!--                                             <label class="switch" >-->
<!--                                                 <input type="checkbox" name="status" id="status" onclick="document.getElementsByName('form')[0].submit();" >-->
<!--                                                 <span class="slider round"></span>-->
<!--                                             </label>-->
                                             <input type="submit" id="submit" class ='btn btn-info' value="Done">
                                         </form>
                                         <!-- Rounded switch -->

                                     </td>

                                </tr>

                            {% endif %}

                        {% endfor %}
                    {% endfor %}
                    {% for task in user.tasks %}
                        {%  if task.status == True %}
                            <td></td>
                            <td>{{task.description}}</td>
                            <td></td>
                            <td>
                                <form action="/removeTask" method="post">
                                     <input type="hidden" name="id" value="{{task.task_id}}">
                                     <input type="submit" class ='btn btn-danger' value="Remove">
                                 </form>
                            </td>
                            <td>
                                 <form action="/changeStatus" method="post"  name="form">
                                                 <input type="hidden" name="id" value="{{task.task_id}}">
    <!--                                             <label class="switch" >-->
    <!--                                                 <input type="checkbox" name="status" id="status" onclick="document.getElementsByName('form')[0].submit();" >-->
    <!--                                                 <span class="slider round"></span>-->
    <!--                                             </label>-->
                                     <input type="submit" class ='btn btn-info' value="Undone">
                                 </form>
                                 <!-- Rounded switch -->

                             </td>
                        {% endif %}
                {% endfor %}
                </tbody>
            </table>
        <a class="btn-success btn-block btn btn-lg" href="{{url_for('addTask')}}">Add a new Task</a>

        {% else %}
        <div class="alert alert-warning text-center">
            <h4>You dont have task in list!</h4>
        </div>
        {% endif %}
    </div>

{% endblock%}